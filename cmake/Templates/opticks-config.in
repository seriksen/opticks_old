#!/bin/sh

#-----------------------------------------------------------------------
# sh config query script for  Opticks @Opticks_VERSION@ on UNIX platforms
# Autogenerated by CMake DO NOT EDIT
#-----------------------------------------------------------------------


#-----------------------------------------------------------------------
# Determine location of this script.
# NB, we don't always use the result of this calculation, but it does not
# hurt to do it. Only possible error is if too long a chain of symbolic 
# links are used to point to the physical script.
#
# Resolve symbolic links to script - we should end up with a physical file
script="$0"
calldir=`pwd`
loopcount=""

while [ "x`readlink $script`" != "x" ] ; do
  preloc=`dirname $script`
  script=`readlink $script`

  if [ ${script##/} = ${script##~} ] ; then
    # The symbolic link was relative...
    script="$preloc/$script"
  fi
  loopcount="l$loopcount"

  if [ ${#loopcount} -gt 10 ] ; then
    echo "error: more than 10 symbolic links to opticks-config traversed."
    exit 1
  fi
done

# If we still have a relative path, then it must be relative to the 
# calling dir. NB we don't attempt to resolve directory symbolic 
# links or remove '.' or '..'
if [ ${script##/} = ${script##~} ] ; then
  script="$calldir/$script"
fi

#-----------------------------------------------------------------------
# Finally, grab the directory in which the script is located
# Used below should we be setup to be relocatable.
scriptloc=`dirname $script`


# echo scriptloc $scriptloc


#-----------------------------------------------------------------------
# Expansion and calculation of all needed variables
#
prefix=@OPTICKS_CONFIG_INSTALL_PREFIX@
exec_prefix=@OPTICKS_CONFIG_EXECPREFIX@
libdir=@OPTICKS_CONFIG_LIBDIR@
includedirs="@OPTICKS_CONFIG_INCLUDE_DIRS@"


name="opticks"
description="Opticks toolkit for the simulation of the optical photons using the NVIDIA OptiX ray tracing engine"
version="@OPTICKS_VERSION@"

cflags="@CMAKE_CXX_FLAGS@ @GEANT4_CXXSTD_FLAGS@"



# - Includes and Libs
for incdir in ${includedirs} ; do
  cflags="${cflags} -I${incdir}"
done



libs_compute_(){ cat << EOL

-lSysRap
-lBoostRap
-lNPY
-lOpticksCore

-lAssimpRap
-lOpenMeshRap
-lGGeo
-lOpticksGeometry

-lOptiXRap
-lCUDARap
-lThrustRap
-lOKOP

EOL
}

libs_viz_(){ cat << EOL

-lOGLRap
-lOpticksGL
-lOK

EOL
}

libs_g4(){ cat << EOL
cfg4
okg4
EOL
}


libs_noviz(){ echo "-L${libdir}" $(libs_compute_)  ; }
libs(){       echo "-L${libdir}" $(libs_compute_)  $(libs_viz_)  ; }



notes(){ 

cat << EON

prefix      @OPTICKS_CONFIG_INSTALL_PREFIX@
exec_prefix @OPTICKS_CONFIG_EXECPREFIX@
libdir      @OPTICKS_CONFIG_LIBDIR@
includedirs @OPTICKS_CONFIG_INCLUDE_DIRS@

EON

}






help()
{
  cat<<EOF
Usage: opticks-config [OPTION...]
  --prefix                output installation prefix of Opticks
  --version               output version for Opticks
  --libs                  output all linker flags
  --libdir                output path to dir containing libs and executables
  --incdir                output path to dir containing sub-folders of includes

  --cflags                output all preprocessor
                          and compiler flags

  --libs-without-gui      output linker flags without
                          GUI components
  --cflags-without-gui    output preprocessor and compiler
                          flags without GUI components

Help options:
  -?, --help              show this help message
  --usage                 display brief usage message
EOF

  exit 1
}

usage(){ cat<<EOF
Usage: opticks-config [--prefix] [--version] [--libs] [--cflags] [--libs-without-gui] [--cflags-without-gui] [--libdir] [--incdir]
EOF
  exit 1
}

info(){ cat << EOI

--prefix    : ${prefix}
--version   : ${version}
--libdir    : ${libdir}
--incdir    : ${includedirs}

--libs     
    $(libs)

--libs-without-gui 
    $(libsnoviz)


--cflags
    ${cflags}

--cflags-without-gui 
    ${cflags-without-gui}



EOI
}


if test $# -eq 0 ; then
  usage
fi

while test $# -gt 0 ; do
  case "$1" in
    -*=*)
      optarg=`echo "$1" | sed 's/[-_a-zA-Z0-9]*=//'`
      ;;
    *)
      optarg=
      ;;
  esac

  case "$1" in
    --prefix)
      echo ${prefix}
      ;;

    --version)
      echo ${version}
      ;;

    --libs)
      libs
      ;;

    --libs-without-gui)
      libsnoviz
      ;;

    --libdir)
      echo "${libdir}" 
      ;;

    --incdir)
      echo "${includedirs}" 
      ;;

    --cflags)
      echo ${cflags}
      ;;

    --cflags-without-gui)
      echo ${cflags}
      ;;

    -?)
      help
      ;;

    --help)
      help
      ;;

    --usage)
      usage
      ;;

    --notes)
      notes
      ;;

    --info)
      info
      ;;


    *)
      usage
      ;;
  esac

  shift
done

exit 0
